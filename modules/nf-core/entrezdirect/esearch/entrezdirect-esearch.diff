Changes in component 'nf-core/entrezdirect/esearch'
Changes in 'entrezdirect/esearch/main.nf':
--- modules/nf-core/entrezdirect/esearch/main.nf
+++ modules/nf-core/entrezdirect/esearch/main.nf
@@ -8,12 +8,12 @@
         'biocontainers/entrez-direct:16.2--he881be0_1' }"
 
     input:
-    tuple val(meta), val(term)
+    tuple val(meta), val(species)
     val database
 
     output:
-    tuple val(meta), path("*.xml") , emit: xml
-    path "versions.yml"            , emit: versions
+    tuple val(meta), val(species), env(TAXONOMY_COUNT), emit: count
+    path "versions.yml"                               , emit: versions
 
     when:
     task.ext.when == null || task.ext.when
@@ -21,11 +21,19 @@
     script:
     def prefix = task.ext.prefix ?: "${meta.id}"
     def args = task.ext.args ?: ''
+    def args2 = task.ext.args2 ?: ''
     """
-    esearch \\
+    # Get count of taxonomy hits for the query species name
+    TAXONOMY_COUNT=\$(esearch \\
         -db $database \\
-        -query $term \\
-        $args > ${prefix}.xml
+        -query "$species" \\
+        $args | \\
+    xtract \\
+        -pattern ENTREZ_DIRECT \\
+        -element Count \\
+        $args2)
+
+    export TAXONOMY_COUNT
 
     cat <<-END_VERSIONS > versions.yml
     "${task.process}":

'modules/nf-core/entrezdirect/esearch/environment.yml' is unchanged
'modules/nf-core/entrezdirect/esearch/meta.yml' is unchanged
'modules/nf-core/entrezdirect/esearch/tests/main.nf.test.snap' is unchanged
'modules/nf-core/entrezdirect/esearch/tests/main.nf.test' is unchanged
'modules/nf-core/entrezdirect/esearch/tests/nextflow.config' is unchanged
************************************************************
