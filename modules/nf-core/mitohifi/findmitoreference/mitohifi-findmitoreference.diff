Changes in component 'nf-core/mitohifi/findmitoreference'
Changes in 'mitohifi/findmitoreference/main.nf':
--- modules/nf-core/mitohifi/findmitoreference/main.nf
+++ modules/nf-core/mitohifi/findmitoreference/main.nf
@@ -6,12 +6,12 @@
     container 'ghcr.io/marcelauliano/mitohifi:master'
 
     input:
-    val species
+    tuple val(meta), val(species)
 
     output:
-    path "*.fasta",                 emit: fasta
-    path "*.gb",                    emit: gb
-    path "versions.yml",            emit: versions
+    tuple val(meta), path("*.fasta"), emit: fasta, optional: true
+    tuple val(meta), path("*.gb")   , emit: gb, optional: true
+    path "versions.yml"             , emit: versions
 
     when:
     task.ext.when == null || task.ext.when
@@ -19,15 +19,28 @@
     script:
     def args = task.ext.args ?: ''
     """
+    set +e
     findMitoReference.py \\
         --species "$species" \\
         --outfolder . \\
         $args
+    set -e
 
     cat <<-END_VERSIONS > versions.yml
     "${task.process}":
         mitohifi: \$( mitohifi.py -v | sed 's/.* //' )
     END_VERSIONS
+
+    # Test: task success if both, or no outputs are found, and fail upon partial output (one of two filetypes found)
+
+    FASTA_COUNT=\$(ls *.fasta 2>/dev/null | wc -l)
+    GB_COUNT=\$(ls *.gb 2>/dev/null | wc -l)
+
+    if [[ \$FASTA_COUNT -eq \$GB_COUNT ]]; then
+        exit 0
+    else
+        exit 1
+    fi
     """
 
     stub:

'modules/nf-core/mitohifi/findmitoreference/environment.yml' is unchanged
'modules/nf-core/mitohifi/findmitoreference/meta.yml' is unchanged
************************************************************
